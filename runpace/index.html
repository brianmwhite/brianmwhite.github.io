<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="apple-touch-icon" href="./apple-touch-icon.png">
    <link rel="canonical" href="https://www.thirdember.com/runpace/" />
    <link rel="manifest" href="./manifest.webmanifest">
    <script type="module" src="./main.js"></script>
    <title>RunCalc</title>
</head>

<body>
    <link rel="stylesheet" href="./styles.css" />
    <fieldset>
        <div><label>Pace[min/mi]:<input type="number" inputmode="decimal" id="pace" name="pace"
                    pattern="^[0-9]+(?:\.[0-9]{2})?$" autofocus /></label></div>
        <div><label>Pace[min/km]:<input type="text" id="avgpacekm" name="avgpacekm" /></label></div>
        <div><label>5K / 10k Total:<input type="text" id="total5k" name="total5k" /></label></div>
        <div><label>5K in <span id="targetTimeUp"></span>min:<input type="text" id="target5kpaceUp"
                    name="target5kpaceDown" /></label></div>
        <div><label>5K in <span id="targetTimeDown"></span>min:<input type="text" id="target5kpaceDown"
                    name="target5kpaceDown" /></label></div>
    </fieldset>
    <script type="text/javascript" src="./calc.js"></script>
    <script>
        window.onload = function () {
            const input = document.getElementById("pace");
            input.addEventListener("input", function (event) {
                const pace = input.value;
                let calc = new PaceCalc(pace);

                // document.getElementById("avgpacemi").value = calc.MinutesPerMileOriginal;
                document.getElementById("avgpacekm").value = calc.MinutesPerKilometerFormatted;
                document.getElementById("total5k").value = calc.Estimated5KTotalTimeFormatted + " / " + calc.Estimated10TotalTimeFormatted;

                const TargetMinutesUp = PaceCalc.RoundUpToNearest(calc.Estimated5KTotalTimeMinutesDecimal, 0.5);
                const TargetMinutesDown = PaceCalc.RoundDownToNearest(calc.Estimated5KTotalTimeMinutesDecimal, 0.5);

                document.getElementById("targetTimeUp").textContent = TargetMinutesUp;
                document.getElementById("target5kpaceUp").value = PaceCalc.calcPaceFromTotalTime(TargetMinutesUp * 60, 5);

                document.getElementById("targetTimeDown").textContent = TargetMinutesDown;
                document.getElementById("target5kpaceDown").value = PaceCalc.calcPaceFromTotalTime(TargetMinutesDown * 60, 5);
            });

            input.focus();
            input.click();
        };
    </script>
</body>

</html>